{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">{{ title }}</h4>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}

                    {% for field in form %}
                    <div class="mb-3">
                        <label class="form-label fw-bold">{{ field.label }}</label>
                        {{ field }}

                        {% if field.help_text %}
                            <small class="form-text text-muted">{{ field.help_text }}</small>
                        {% endif %}

                        {% if field.errors %}
                            <div class="text-danger small">{{ field.errors.0 }}</div>
                        {% endif %}
                    </div>
                    {% endfor %}

                    <div class="d-flex justify-content-between mt-4">
                        <a href="{% url 'asset_list' %}" class="btn btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</a>
                        <button type="submit" class="btn btn-success">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è
    document.addEventListener('DOMContentLoaded', function() {
        const textareas = document.querySelectorAll('textarea.auto-expand');

        textareas.forEach(textarea => {
            // –§—É–Ω–∫—Ü—ñ—è –∑–º—ñ–Ω–∏ –≤–∏—Å–æ—Ç–∏
            const adjustHeight = () => {
                textarea.style.height = 'auto'; // –°–∫–∏–¥–∞—î–º–æ –≤–∏—Å–æ—Ç—É
                textarea.style.height = textarea.scrollHeight + 'px'; // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
            };

            // –°–ª—É—Ö–∞—î–º–æ –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
            textarea.addEventListener('input', adjustHeight);

            // –í–∏–∫–ª–∏–∫–∞—î–º–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ (—è–∫—â–æ –º–∏ —Ä–µ–¥–∞–≥—É—î–º–æ –∑–∞–ø–∏—Å –∑ –¥–æ–≤–≥–∏–º —Ç–µ–∫—Å—Ç–æ–º)
            adjustHeight();
        });
    });
</script>
{% endblock %}